{"ast":null,"code":"import { UserFormComponent } from 'src/app/components/forms/user-form/user-form.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/authorization.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"ng-zorro-antd/button\";\nimport * as i4 from \"ng-zorro-antd/core/transition-patch\";\nimport * as i5 from \"ng-zorro-antd/core/wave\";\nimport * as i6 from \"../../components/forms/user-form/user-form.component\";\nexport class RegistrationPageComponent {\n  constructor(authorizationService, router) {\n    this.authorizationService = authorizationService;\n    this.router = router;\n    this.registerUser = {\n      login: '',\n      password: ''\n    };\n    this.loginValid = true;\n  }\n  resetForm(e) {\n    this.userFormComponent?.resetForm(e);\n  }\n  submitForm() {\n    if (this.userFormComponent?.submitForm()) {\n      this.authorizationService.signUp(this.registerUser).subscribe(() => {\n        if (this.loginValid) {\n          this.authorizationService.logIn(this.registerUser).subscribe(() => {\n            if (this.authorizationService.userResponseAuthModel != null) {\n              this.router.navigate(['/home']);\n            }\n          });\n        }\n      });\n    }\n  }\n}\nRegistrationPageComponent.ɵfac = function RegistrationPageComponent_Factory(t) {\n  return new (t || RegistrationPageComponent)(i0.ɵɵdirectiveInject(i1.AuthorizationService), i0.ɵɵdirectiveInject(i2.Router));\n};\nRegistrationPageComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: RegistrationPageComponent,\n  selectors: [[\"app-registration-page\"]],\n  viewQuery: function RegistrationPageComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(UserFormComponent, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.userFormComponent = _t.first);\n    }\n  },\n  decls: 12,\n  vars: 2,\n  consts: [[2, \"height\", \"100%\", \"display\", \"flex\", \"flex-direction\", \"column\", \"justify-content\", \"center\", \"align-items\", \"center\"], [2, \"width\", \"100%\", 3, \"registerUser\", \"loginValid\"], [\"nz-button\", \"\", 2, \"width\", \"147px\", \"margin-left\", \"50px\", 3, \"click\"], [\"nz-button\", \"\", \"nzType\", \"primary\", 2, \"width\", \"147px\", \"margin-left\", \"6px\", 3, \"click\"], [2, \"margin-top\", \"10px\"], [\"routerLink\", \"/authorize\"]],\n  template: function RegistrationPageComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelement(1, \"app-user-form\", 1);\n      i0.ɵɵelementStart(2, \"div\")(3, \"button\", 2);\n      i0.ɵɵlistener(\"click\", function RegistrationPageComponent_Template_button_click_3_listener($event) {\n        return ctx.resetForm($event);\n      });\n      i0.ɵɵtext(4, \"Reset\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"button\", 3);\n      i0.ɵɵlistener(\"click\", function RegistrationPageComponent_Template_button_click_5_listener() {\n        return ctx.submitForm();\n      });\n      i0.ɵɵtext(6, \"Sign Up\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(7, \"div\", 4);\n      i0.ɵɵtext(8, \" Or \");\n      i0.ɵɵelementStart(9, \"a\", 5);\n      i0.ɵɵtext(10, \"log in\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(11, \" now! \");\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"registerUser\", ctx.registerUser)(\"loginValid\", ctx.loginValid);\n    }\n  },\n  dependencies: [i2.RouterLink, i3.NzButtonComponent, i4.ɵNzTransitionPatchDirective, i5.NzWaveDirective, i6.UserFormComponent],\n  styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["UserFormComponent","RegistrationPageComponent","constructor","authorizationService","router","registerUser","login","password","loginValid","resetForm","e","userFormComponent","submitForm","signUp","subscribe","logIn","userResponseAuthModel","navigate","i0","ɵɵdirectiveInject","i1","AuthorizationService","i2","Router","selectors","viewQuery","RegistrationPageComponent_Query","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵlistener","RegistrationPageComponent_Template_button_click_3_listener","$event","ɵɵtext","ɵɵelementEnd","RegistrationPageComponent_Template_button_click_5_listener","ɵɵadvance","ɵɵproperty"],"sources":["/Users/kauriya/Documents/Projects/ASP.NET/WebAppShopStudy/web-shop-client/src/app/pages/registration-page/registration-page.component.ts","/Users/kauriya/Documents/Projects/ASP.NET/WebAppShopStudy/web-shop-client/src/app/pages/registration-page/registration-page.component.html"],"sourcesContent":["import { HttpErrorResponse } from '@angular/common/http';\nimport { Component, ViewChild } from '@angular/core';\nimport { UntypedFormGroup, UntypedFormControl, ValidationErrors, UntypedFormBuilder, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { Observable, Observer, tap } from 'rxjs';\nimport { UserFormComponent } from 'src/app/components/forms/user-form/user-form.component';\nimport { IUserRegistrationModel } from 'src/app/models/user-registration.model';\nimport { AuthorizationService } from 'src/app/services/authorization.service';\n\n@Component({\n  selector: 'app-registration-page',\n  templateUrl: './registration-page.component.html',\n  styleUrls: ['./registration-page.component.css']\n})\nexport class RegistrationPageComponent {\n  constructor(\n    private authorizationService: AuthorizationService,\n    private router: Router\n  ){ }\n\n  @ViewChild(UserFormComponent) userFormComponent: UserFormComponent | undefined;\n\n  registerUser: IUserRegistrationModel = {\n    login: '',\n    password: ''\n  };\n  loginValid: boolean = true;\n\n  resetForm(e: MouseEvent): void {\n    this.userFormComponent?.resetForm(e);\n  }\n\n  submitForm(): void {\n    if(this.userFormComponent?.submitForm()){\n      this.authorizationService.signUp(this.registerUser).subscribe(() => {\n        if(this.loginValid){\n          this.authorizationService.logIn(this.registerUser).subscribe(() => {\n            if(this.authorizationService.userResponseAuthModel != null){\n              this.router.navigate(['/home']);\n            }\n          })\n        }\n      })\n    }\n  }\n\n}\n","<div style=\"height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center;\">\n    <app-user-form style=\"width: 100%;\" [registerUser]=\"registerUser\" [loginValid]=\"loginValid\"></app-user-form>\n    <div>\n        <button nz-button style=\"width: 147px; margin-left: 50px;\"  \n            (click)=\"resetForm($event)\">Reset</button>\n        <button nz-button style=\"width: 147px; margin-left: 6px;\"\n            nzType=\"primary\" (click)=\"submitForm()\">Sign Up</button>\n    </div>\n    <div style=\"margin-top: 10px;\">\n        Or <a routerLink=\"/authorize\">log in</a> now!\n    </div>\n</div>"],"mappings":"AAKA,SAASA,iBAAiB,QAAQ,wDAAwD;;;;;;;;AAS1F,OAAM,MAAOC,yBAAyB;EACpCC,YACUC,oBAA0C,EAC1CC,MAAc;IADd,KAAAD,oBAAoB,GAApBA,oBAAoB;IACpB,KAAAC,MAAM,GAANA,MAAM;IAKhB,KAAAC,YAAY,GAA2B;MACrCC,KAAK,EAAE,EAAE;MACTC,QAAQ,EAAE;KACX;IACD,KAAAC,UAAU,GAAY,IAAI;EARvB;EAUHC,SAASA,CAACC,CAAa;IACrB,IAAI,CAACC,iBAAiB,EAAEF,SAAS,CAACC,CAAC,CAAC;EACtC;EAEAE,UAAUA,CAAA;IACR,IAAG,IAAI,CAACD,iBAAiB,EAAEC,UAAU,EAAE,EAAC;MACtC,IAAI,CAACT,oBAAoB,CAACU,MAAM,CAAC,IAAI,CAACR,YAAY,CAAC,CAACS,SAAS,CAAC,MAAK;QACjE,IAAG,IAAI,CAACN,UAAU,EAAC;UACjB,IAAI,CAACL,oBAAoB,CAACY,KAAK,CAAC,IAAI,CAACV,YAAY,CAAC,CAACS,SAAS,CAAC,MAAK;YAChE,IAAG,IAAI,CAACX,oBAAoB,CAACa,qBAAqB,IAAI,IAAI,EAAC;cACzD,IAAI,CAACZ,MAAM,CAACa,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC;;UAEnC,CAAC,CAAC;;MAEN,CAAC,CAAC;;EAEN;;AA9BWhB,yBAAyB,C;mBAAzBA,yBAAyB,EAAAiB,EAAA,CAAAC,iBAAA,CAAAC,EAAA,CAAAC,oBAAA,GAAAH,EAAA,CAAAC,iBAAA,CAAAG,EAAA,CAAAC,MAAA;AAAA;AAAzBtB,yBAAyB,C;QAAzBA,yBAAyB;EAAAuB,SAAA;EAAAC,SAAA,WAAAC,gCAAAC,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;qBAMzB3B,iBAAiB;;;;;;;;;;;;MCpB9BkB,EAAA,CAAAW,cAAA,aAAgH;MAC5GX,EAAA,CAAAY,SAAA,uBAA4G;MAC5GZ,EAAA,CAAAW,cAAA,UAAK;MAEGX,EAAA,CAAAa,UAAA,mBAAAC,2DAAAC,MAAA;QAAA,OAASL,GAAA,CAAAnB,SAAA,CAAAwB,MAAA,CAAiB;MAAA,EAAC;MAACf,EAAA,CAAAgB,MAAA,YAAK;MAAAhB,EAAA,CAAAiB,YAAA,EAAS;MAC9CjB,EAAA,CAAAW,cAAA,gBAC4C;MAAvBX,EAAA,CAAAa,UAAA,mBAAAK,2DAAA;QAAA,OAASR,GAAA,CAAAhB,UAAA,EAAY;MAAA,EAAC;MAACM,EAAA,CAAAgB,MAAA,cAAO;MAAAhB,EAAA,CAAAiB,YAAA,EAAS;MAEhEjB,EAAA,CAAAW,cAAA,aAA+B;MAC3BX,EAAA,CAAAgB,MAAA,WAAG;MAAAhB,EAAA,CAAAW,cAAA,WAA2B;MAAAX,EAAA,CAAAgB,MAAA,cAAM;MAAAhB,EAAA,CAAAiB,YAAA,EAAI;MAACjB,EAAA,CAAAgB,MAAA,cAC7C;MAAAhB,EAAA,CAAAiB,YAAA,EAAM;;;MAT8BjB,EAAA,CAAAmB,SAAA,GAA6B;MAA7BnB,EAAA,CAAAoB,UAAA,iBAAAV,GAAA,CAAAvB,YAAA,CAA6B,eAAAuB,GAAA,CAAApB,UAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}