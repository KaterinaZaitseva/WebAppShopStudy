{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { ProductFormComponent } from '../../forms/product-form/product-form.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/products.service\";\nimport * as i2 from \"ng-zorro-antd/icon\";\nimport * as i3 from \"ng-zorro-antd/button\";\nimport * as i4 from \"ng-zorro-antd/core/transition-patch\";\nimport * as i5 from \"ng-zorro-antd/core/wave\";\nimport * as i6 from \"ng-zorro-antd/modal\";\nimport * as i7 from \"../../forms/product-form/product-form.component\";\nfunction ModalCreateProductComponent_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"app-product-form\", 4);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"product\", ctx_r0.product);\n  }\n}\nexport class ModalCreateProductComponent {\n  constructor(productsService) {\n    this.productsService = productsService;\n    this.isVisible = false;\n    this.product = {\n      name: '',\n      description: '',\n      price: 0,\n      pictureUrl: 'https://img.freepik.com/free-vector/page-found-concept-illustration_114360-1869.jpg'\n    };\n    this.onChange = new EventEmitter();\n  }\n  showModal() {\n    this.isVisible = true;\n  }\n  handleOk() {\n    if (!this.productForm?.submitForm()) return;\n    console.log(this.product);\n    this.productsService.create(this.product).subscribe(() => {\n      this.productsService.getAll();\n      this.onChange?.emit();\n      console.log('emitted');\n    });\n    this.isVisible = false;\n  }\n  handleCancel() {\n    this.isVisible = false;\n  }\n}\nModalCreateProductComponent.ɵfac = function ModalCreateProductComponent_Factory(t) {\n  return new (t || ModalCreateProductComponent)(i0.ɵɵdirectiveInject(i1.ProductsService));\n};\nModalCreateProductComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ModalCreateProductComponent,\n  selectors: [[\"app-modal-create-product\"]],\n  viewQuery: function ModalCreateProductComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(ProductFormComponent, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.productForm = _t.first);\n    }\n  },\n  outputs: {\n    onChange: \"onChange\"\n  },\n  decls: 4,\n  vars: 2,\n  consts: [[\"nz-button\", \"\", \"nzType\", \"primary\", \"nzShape\", \"circle\", 3, \"nzSize\", \"click\"], [\"nz-icon\", \"\", \"nzType\", \"plus\"], [\"nzTitle\", \"Creating\", 3, \"nzVisible\", \"nzVisibleChange\", \"nzOnCancel\", \"nzOnOk\"], [4, \"nzModalContent\"], [3, \"product\"]],\n  template: function ModalCreateProductComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"button\", 0);\n      i0.ɵɵlistener(\"click\", function ModalCreateProductComponent_Template_button_click_0_listener() {\n        return ctx.showModal();\n      });\n      i0.ɵɵelement(1, \"span\", 1);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"nz-modal\", 2);\n      i0.ɵɵlistener(\"nzVisibleChange\", function ModalCreateProductComponent_Template_nz_modal_nzVisibleChange_2_listener($event) {\n        return ctx.isVisible = $event;\n      })(\"nzOnCancel\", function ModalCreateProductComponent_Template_nz_modal_nzOnCancel_2_listener() {\n        return ctx.handleCancel();\n      })(\"nzOnOk\", function ModalCreateProductComponent_Template_nz_modal_nzOnOk_2_listener() {\n        return ctx.handleOk();\n      });\n      i0.ɵɵtemplate(3, ModalCreateProductComponent_ng_container_3_Template, 2, 1, \"ng-container\", 3);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"nzSize\", \"large\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"nzVisible\", ctx.isVisible);\n    }\n  },\n  dependencies: [i2.NzIconDirective, i3.NzButtonComponent, i4.ɵNzTransitionPatchDirective, i5.NzWaveDirective, i6.NzModalComponent, i6.NzModalContentDirective, i7.ProductFormComponent],\n  styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["EventEmitter","ProductFormComponent","i0","ɵɵelementContainerStart","ɵɵelement","ɵɵelementContainerEnd","ɵɵadvance","ɵɵproperty","ctx_r0","product","ModalCreateProductComponent","constructor","productsService","isVisible","name","description","price","pictureUrl","onChange","showModal","handleOk","productForm","submitForm","console","log","create","subscribe","getAll","emit","handleCancel","ɵɵdirectiveInject","i1","ProductsService","selectors","viewQuery","ModalCreateProductComponent_Query","rf","ctx","ɵɵelementStart","ɵɵlistener","ModalCreateProductComponent_Template_button_click_0_listener","ɵɵelementEnd","ModalCreateProductComponent_Template_nz_modal_nzVisibleChange_2_listener","$event","ModalCreateProductComponent_Template_nz_modal_nzOnCancel_2_listener","ModalCreateProductComponent_Template_nz_modal_nzOnOk_2_listener","ɵɵtemplate","ModalCreateProductComponent_ng_container_3_Template"],"sources":["/Users/kauriya/Documents/Projects/ASP.NET/WebAppShopStudy/web-shop-client/src/app/components/modal/modal-create-product/modal-create-product.component.ts","/Users/kauriya/Documents/Projects/ASP.NET/WebAppShopStudy/web-shop-client/src/app/components/modal/modal-create-product/modal-create-product.component.html"],"sourcesContent":["import { Component, EventEmitter, Input, Output, ViewChild } from '@angular/core';\nimport { IProductModel } from 'src/app/models/product-model';\nimport { ProductsService } from 'src/app/services/products.service';\nimport { ProductFormComponent } from '../../forms/product-form/product-form.component';\n\n@Component({\n  selector: 'app-modal-create-product',\n  templateUrl: './modal-create-product.component.html',\n  styleUrls: ['./modal-create-product.component.css']\n})\nexport class ModalCreateProductComponent {\n  \n  constructor(\n    private productsService: ProductsService,\n  ) {\n  }\n\n  isVisible = false;\n\n  product: IProductModel = {\n    name: '', \n    description: '', \n    price: 0, \n    pictureUrl: 'https://img.freepik.com/free-vector/page-found-concept-illustration_114360-1869.jpg'\n  };\n  @ViewChild(ProductFormComponent) productForm: ProductFormComponent | undefined\n  @Output() onChange : EventEmitter<any> = new EventEmitter();\n\n  showModal(): void {\n    this.isVisible = true;\n  }\n\n  handleOk(): void {\n    if(!this.productForm?.submitForm())\n      return;\n      \n    console.log(this.product);\n\n    this.productsService.create(this.product).subscribe(\n     () => {\n        this.productsService.getAll()\n        this.onChange?.emit()\n        console.log('emitted');\n      }\n    );\n    this.isVisible = false;\n  }\n\n  handleCancel(): void {\n    this.isVisible = false;\n  }\n\n}\n","<button nz-button nzType=\"primary\" [nzSize]=\"'large'\" nzShape=\"circle\" (click)=\"showModal()\">\n    <span nz-icon nzType=\"plus\"></span>\n</button>\n\n<nz-modal [(nzVisible)]=\"isVisible\" \n  nzTitle=\"Creating\" \n  (nzOnCancel)=\"handleCancel()\" \n  (nzOnOk)=\"handleOk()\">\n  <ng-container *nzModalContent>\n    <app-product-form [product]=\"this.product\"></app-product-form>\n  </ng-container>\n</nz-modal>"],"mappings":"AAAA,SAAoBA,YAAY,QAAkC,eAAe;AAGjF,SAASC,oBAAoB,QAAQ,iDAAiD;;;;;;;;;;;ICKpFC,EAAA,CAAAC,uBAAA,GAA8B;IAC5BD,EAAA,CAAAE,SAAA,0BAA8D;IAChEF,EAAA,CAAAG,qBAAA,EAAe;;;;IADKH,EAAA,CAAAI,SAAA,GAAwB;IAAxBJ,EAAA,CAAAK,UAAA,YAAAC,MAAA,CAAAC,OAAA,CAAwB;;;ADC9C,OAAM,MAAOC,2BAA2B;EAEtCC,YACUC,eAAgC;IAAhC,KAAAA,eAAe,GAAfA,eAAe;IAIzB,KAAAC,SAAS,GAAG,KAAK;IAEjB,KAAAJ,OAAO,GAAkB;MACvBK,IAAI,EAAE,EAAE;MACRC,WAAW,EAAE,EAAE;MACfC,KAAK,EAAE,CAAC;MACRC,UAAU,EAAE;KACb;IAES,KAAAC,QAAQ,GAAuB,IAAIlB,YAAY,EAAE;EAX3D;EAaAmB,SAASA,CAAA;IACP,IAAI,CAACN,SAAS,GAAG,IAAI;EACvB;EAEAO,QAAQA,CAAA;IACN,IAAG,CAAC,IAAI,CAACC,WAAW,EAAEC,UAAU,EAAE,EAChC;IAEFC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACf,OAAO,CAAC;IAEzB,IAAI,CAACG,eAAe,CAACa,MAAM,CAAC,IAAI,CAAChB,OAAO,CAAC,CAACiB,SAAS,CAClD,MAAK;MACF,IAAI,CAACd,eAAe,CAACe,MAAM,EAAE;MAC7B,IAAI,CAACT,QAAQ,EAAEU,IAAI,EAAE;MACrBL,OAAO,CAACC,GAAG,CAAC,SAAS,CAAC;IACxB,CAAC,CACF;IACD,IAAI,CAACX,SAAS,GAAG,KAAK;EACxB;EAEAgB,YAAYA,CAAA;IACV,IAAI,CAAChB,SAAS,GAAG,KAAK;EACxB;;AAxCWH,2BAA2B,C;mBAA3BA,2BAA2B,EAAAR,EAAA,CAAA4B,iBAAA,CAAAC,EAAA,CAAAC,eAAA;AAAA;AAA3BtB,2BAA2B,C;QAA3BA,2BAA2B;EAAAuB,SAAA;EAAAC,SAAA,WAAAC,kCAAAC,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;qBAe3BnC,oBAAoB;;;;;;;;;;;;;;;MCzBjCC,EAAA,CAAAoC,cAAA,gBAA6F;MAAtBpC,EAAA,CAAAqC,UAAA,mBAAAC,6DAAA;QAAA,OAASH,GAAA,CAAAlB,SAAA,EAAW;MAAA,EAAC;MACxFjB,EAAA,CAAAE,SAAA,cAAmC;MACvCF,EAAA,CAAAuC,YAAA,EAAS;MAETvC,EAAA,CAAAoC,cAAA,kBAGwB;MAHdpC,EAAA,CAAAqC,UAAA,6BAAAG,yEAAAC,MAAA;QAAA,OAAAN,GAAA,CAAAxB,SAAA,GAAA8B,MAAA;MAAA,EAAyB,wBAAAC,oEAAA;QAAA,OAEnBP,GAAA,CAAAR,YAAA,EAAc;MAAA,EAFK,oBAAAgB,gEAAA;QAAA,OAGvBR,GAAA,CAAAjB,QAAA,EAAU;MAAA,EAHa;MAIjClB,EAAA,CAAA4C,UAAA,IAAAC,mDAAA,0BAEe;MACjB7C,EAAA,CAAAuC,YAAA,EAAW;;;MAXwBvC,EAAA,CAAAK,UAAA,mBAAkB;MAI3CL,EAAA,CAAAI,SAAA,GAAyB;MAAzBJ,EAAA,CAAAK,UAAA,cAAA8B,GAAA,CAAAxB,SAAA,CAAyB"},"metadata":{},"sourceType":"module","externalDependencies":[]}